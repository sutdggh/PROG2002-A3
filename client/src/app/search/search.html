<app-header></app-header>

<div class="container">
  <form id="search-form" (ngSubmit)="search()">
    <label for="date">Date:</label>
    <input type="date" id="date" name="date" [(ngModel)]="date">

    <label for="location">City or State:</label>
    <input type="text" id="location" placeholder="Enter city or state" name="location" [(ngModel)]="location">

    <label for="category">Category:</label>
    <select id="category" name="category" [(ngModel)]="category_id">
      <option value="">All Categories</option>
      <option *ngFor="let c of categories" [value]="c.id">{{c.name}}</option>
    </select>

    <button type="submit">Search</button>
    <button type="button" (click)="clear()">Clear Filters</button>
  </form>

  <div id="results" class="events-list">
    <div class="card" *ngFor="let e of events">
      <img [src]="e.image_url" [alt]="e.name" />
      <div class="card-body">
        <h3>
          {{e.name}}
          <span *ngIf="isPast(e)" style="color:red; font-size:0.9rem;">(Past)</span>
          <span *ngIf="!isPast(e)" style="color:green; font-size:0.9rem;">(Upcoming)</span>
        </h3>
        <p><strong>Category:</strong> {{e.category}}</p>
        <p><strong>Organization:</strong> {{e.organization}}</p>
        <p><strong>Date:</strong> {{e.start_datetime | date}}</p>
        <p>{{e.purpose}}</p>
        <button (click)="goEvent(e)">View Details</button>
      </div>
    </div>
  </div>

  <div *ngIf="message" class="message">{{message}}</div>
</div>
